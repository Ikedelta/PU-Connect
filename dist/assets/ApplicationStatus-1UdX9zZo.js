import{j as e}from"./query-vendor-Cpskl8RO.js";import{u as f,r as l}from"./react-vendor-Bsfkyusf.js";import{u as j,s as n,N as o}from"./index-DVwrR-_V.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function _(){const r=f(),{user:a,profile:p,refreshProfile:c}=j(),[t,d]=l.useState(null),[m,u]=l.useState(!0);l.useEffect(()=>{if(!a){r("/login");return}g();const s=n.channel("application-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"seller_applications",filter:`user_id=eq.${a.id}`},i=>{d(i.new),i.new.status==="approved"&&c()}).subscribe();return()=>{s.unsubscribe()}},[a,r]);const g=async()=>{if(a)try{const{data:s,error:i}=await n.from("seller_applications").select("*").eq("user_id",a.id).single();if(i){if(i.code==="PGRST116"){r("/seller/apply");return}throw i}d(s),s.status==="approved"&&p?.role==="buyer"&&await b()}catch(s){console.error("Error fetching application:",s)}finally{u(!1)}},b=async()=>{if(a)try{const{error:s}=await n.from("profiles").update({role:"seller"}).eq("id",a.id);if(s)throw s;await c()}catch(s){console.error("Error updating user role:",s)}};if(m)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(o,{}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your application..."})]})})]});if(!t)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(o,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-20 text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-12 shadow-sm border border-gray-100",children:[e.jsx("i",{className:"ri-file-search-line text-6xl text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Application Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't submitted a seller application yet."}),e.jsx("button",{onClick:()=>r("/seller/apply"),className:"px-8 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg hover:from-teal-600 hover:to-teal-700 transition-all font-medium whitespace-nowrap cursor-pointer shadow-md",children:"Apply Now"})]})})]});const h=s=>{switch(s){case"approved":return"ri-checkbox-circle-line";case"rejected":return"ri-close-circle-line";default:return"ri-time-line"}},x=(s=>{switch(s){case"pending":return{title:"Under Review",message:"Your application is being reviewed by our admin team. We'll notify you once a decision is made.",icon:"ri-hourglass-line"};case"approved":return{title:"Congratulations!",message:"Your application has been approved! You can now start selling your products on our platform.",icon:"ri-trophy-line"};case"rejected":return{title:"Application Not Approved",message:"Unfortunately, your application was not approved at this time. Please review the reason below.",icon:"ri-error-warning-line"}}})(t.status);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(o,{}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8 mb-16",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-gray-900 text-white text-[10px] font-bold uppercase tracking-wide rounded-full mb-6",children:[e.jsx("i",{className:"ri-radar-line text-blue-400"}),"Application Review"]}),e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 tracking-tight leading-tight mb-4",children:["Registry",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:"Status."})]}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-wide text-[10px] md:text-xs",children:"Official verification process status"})]}),e.jsxs("button",{onClick:()=>r("/"),className:"text-[10px] font-bold text-gray-400 hover:text-blue-600 uppercase tracking-wide transition-colors cursor-pointer flex items-center justify-center gap-2 group",children:[e.jsx("i",{className:"ri-home-4-line text-lg"}),"Back to Home"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[e.jsxs("div",{className:"lg:col-span-5",children:[e.jsx("div",{className:`p-10 rounded-[2.5rem] border shadow-xl transition-all ${t.status==="approved"?"bg-emerald-50 border-emerald-100 shadow-emerald-500/5":t.status==="rejected"?"bg-rose-50 border-rose-100 shadow-rose-500/5":"bg-blue-50 border-blue-100 shadow-blue-500/5"}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center mb-8 shadow-lg transition-transform hover:scale-105 ${t.status==="approved"?"bg-emerald-600 text-white":t.status==="rejected"?"bg-rose-600 text-white":"bg-blue-600 text-white"}`,children:e.jsx("i",{className:`${h(t.status)} text-4xl`})}),e.jsx("h2",{className:`text-2xl font-bold tracking-tight mb-4 ${t.status==="approved"?"text-emerald-900":t.status==="rejected"?"text-rose-900":"text-blue-900"}`,children:x.title}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wide mb-8 border ${t.status==="approved"?"bg-emerald-100/50 border-emerald-200 text-emerald-700":t.status==="rejected"?"bg-rose-100/50 border-rose-200 text-rose-700":"bg-blue-100/50 border-blue-200 text-blue-700"}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current animate-pulse"}),t.status]}),e.jsx("p",{className:`text-sm font-semibold leading-relaxed mb-10 ${t.status==="approved"?"text-emerald-800":t.status==="rejected"?"text-rose-800":"text-blue-800"}`,children:x.message}),t.status==="approved"?e.jsxs("button",{onClick:()=>r("/seller/dashboard"),className:"w-full py-5 bg-gray-900 text-white font-bold text-xs uppercase tracking-wide rounded-2xl hover:bg-black shadow-lg transition-all flex items-center justify-center gap-3 active:scale-[0.98]",children:[e.jsx("span",{children:"Go to Dashboard"}),e.jsx("i",{className:"ri-arrow-right-line"})]}):t.status==="rejected"?e.jsxs("button",{onClick:()=>r("/seller/apply"),className:"w-full py-5 bg-gray-900 text-white font-bold text-xs uppercase tracking-wide rounded-2xl hover:bg-black shadow-lg transition-all flex items-center justify-center gap-3 active:scale-[0.98]",children:[e.jsx("span",{children:"Update Application"}),e.jsx("i",{className:"ri-refresh-line"})]}):e.jsxs("div",{className:"w-full py-5 bg-white/50 border border-blue-200 text-blue-900 font-bold text-[10px] uppercase tracking-wide rounded-2xl flex items-center justify-center gap-3",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Awaiting Verification"]})]})}),t.rejection_reason&&e.jsxs("div",{className:"mt-8 p-8 bg-rose-50 border border-rose-100 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-rose-400 uppercase tracking-wide mb-3",children:"Admin Comments"}),e.jsxs("p",{className:"text-rose-900 font-semibold leading-relaxed italic",children:['"',t.rejection_reason,'"']})]})]}),e.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide mb-4",children:"Business Name"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 tracking-tight",children:t.business_name})]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide mb-4",children:"Category"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 tracking-tight",children:t.business_category})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide mb-4",children:"Business Description"}),e.jsx("p",{className:"text-gray-600 font-semibold leading-relaxed",children:t.business_description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide mb-4",children:"Phone Number"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 tracking-tight",children:t.contact_phone})]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide mb-4",children:"Email Address"}),e.jsx("p",{className:"text-sm font-bold text-blue-600 tracking-tight break-all",children:t.contact_email})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("i",{className:"ri-calendar-check-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide leading-none mb-1",children:"Submission Date"}),e.jsx("p",{className:"text-xs font-bold text-gray-900",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wide",children:"Verified Record"})]})]})]})]})]})}export{_ as default};
//# sourceMappingURL=ApplicationStatus-1UdX9zZo.js.map
