import{j as e}from"./query-vendor-Cpskl8RO.js";import{u as h,N as n,g as o}from"./index-DVwrR-_V.js";import{c as b}from"./useProducts-YaSfrjFx.js";import{u as f,a as j}from"./useConversations-C3LB1Z11.js";import{h as y,u as w,L as c}from"./react-vendor-Bsfkyusf.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function U(){const{id:x}=y(),{user:a}=h(),i=w(),{data:t,isLoading:m}=b(x),{conversations:g=[]}=f(),l=j(),p=()=>{if(!t?.whatsapp_number){alert("WhatsApp number not available");return}const d=encodeURIComponent(`Hi! I'm interested in your product: ${t.name}`),r=`https://wa.me/${t.whatsapp_number.replace(/[^0-9]/g,"")}?text=${d}`;window.open(r,"_blank")},u=async()=>{if(!a){i("/login");return}if(!t)return;if(a.id===t.seller_id){alert("You cannot message yourself!");return}if(g?.find(r=>r.product_id===t.id&&(r.buyer_id===a.id||r.seller_id===a.id))){i("/messages");return}l.mutate({otherUserId:t.seller_id,productId:t.id},{onSuccess:()=>{i("/messages")},onError:r=>{console.error("Error creating conversation:",r),alert(`Failed to start conversation: ${r.message||"Unknown error"}`)}})};if(m)return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pt-20 transition-colors duration-300",children:[e.jsx(n,{}),e.jsxs("div",{className:"text-center py-24",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-gray-200 border-t-emerald-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400 font-medium",children:"Loading product details..."})]})]});if(!t)return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pt-20 transition-colors duration-300",children:[e.jsx(n,{}),e.jsxs("div",{className:"text-center py-24 max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-shopping-bag-line text-5xl text-red-300 dark:text-red-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Product not found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"The product you are looking for might have been sold or removed by the seller."}),e.jsxs(c,{to:"/marketplace",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to marketplace"]})]})]});const s=t.seller;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pt-20 transition-colors duration-300",children:[e.jsx(n,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(c,{to:"/marketplace",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-bold text-sm uppercase tracking-widest transition-colors cursor-pointer",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to Marketplace"]})}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-xl shadow-gray-200/40 dark:shadow-none border border-gray-50 dark:border-gray-800 overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 p-6 md:p-12",children:[e.jsxs("div",{className:"aspect-[4/5] md:aspect-square bg-gray-50 dark:bg-gray-800 rounded-[2rem] overflow-hidden border border-gray-50 dark:border-gray-800 flex items-center justify-center relative group",children:[t.images&&t.images.length>0?e.jsx("img",{src:o(t.images[0],1e3,85),alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"eager",decoding:"async"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("i",{className:"ri-image-line text-6xl text-gray-200 dark:text-gray-700"})}),t.is_active===!1&&e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:e.jsx("span",{className:"px-8 py-3 bg-red-600 text-white font-bold rounded-full text-lg uppercase tracking-widest shadow-xl",children:"Sold Out"})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("span",{className:"px-4 py-1.5 bg-blue-600 text-white text-[10px] md:text-xs font-bold uppercase tracking-widest rounded-full shadow-lg shadow-blue-500/20",children:t.category}),e.jsxs("div",{className:"flex items-center text-gray-400 text-xs md:text-sm font-bold uppercase tracking-widest",children:[e.jsx("i",{className:"ri-eye-line mr-2 text-blue-600"}),t.views_count||0," Views"]})]}),e.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight",children:t.name}),e.jsx("div",{className:"mb-8 p-8 bg-gray-50 dark:bg-gray-800/50 rounded-[2rem] border border-gray-100 dark:border-gray-800",children:t.price_type==="fixed"?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Listing Price"}),e.jsxs("span",{className:"text-3xl md:text-5xl font-bold text-blue-600 tracking-tight",children:["GHâ‚µ",t.price?.toLocaleString()]})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Pricing Terms"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-600 uppercase tracking-widest",children:"Contact for Quote"})]})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h3",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4 ml-1",children:"Product Description"}),e.jsx("div",{className:"prose prose-blue max-w-none dark:prose-invert",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed text-base font-medium",children:t.description||"No detailed description provided by the seller."})})]}),e.jsxs("div",{className:"mb-10 p-6 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden shadow-sm border-2 border-white dark:border-gray-700",children:s?.avatar_url?e.jsx("img",{src:o(s.avatar_url,128,80),alt:s.full_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-900 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:s?.full_name?.charAt(0).toUpperCase()||"S"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-0.5",children:"Verified Seller"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-base tracking-tight",children:s?.full_name||"Campus Student"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-0.5",children:"Department"}),e.jsx("p",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:s?.department||"University Member"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-auto",children:[e.jsxs("button",{onClick:p,className:"w-full px-4 py-4.5 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 transition-all flex items-center justify-center gap-2 cursor-pointer active:scale-95 text-xs uppercase tracking-widest",disabled:!t?.whatsapp_number,children:[e.jsx("i",{className:"ri-whatsapp-line text-xl"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsxs("a",{href:`tel:${s?.phone}`,className:`w-full px-4 py-4.5 bg-blue-600 text-white font-bold rounded-2xl hover:bg-blue-700 shadow-lg shadow-blue-500/20 transition-all flex items-center justify-center gap-2 cursor-pointer active:scale-95 text-xs uppercase tracking-widest ${s?.phone?"":"opacity-50 pointer-events-none"}`,children:[e.jsx("i",{className:"ri-phone-line text-xl"}),e.jsx("span",{children:"Call Seller"})]}),e.jsxs("button",{onClick:u,className:"w-full px-4 py-4.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-2xl hover:bg-black dark:hover:bg-gray-100 shadow-lg shadow-gray-900/20 transition-all flex items-center justify-center gap-2 cursor-pointer active:scale-95 text-xs uppercase tracking-widest",disabled:l.isPending,children:[e.jsx("i",{className:"ri-message-3-line text-xl"}),e.jsx("span",{children:l.isPending?"Connecting...":"Message"})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-50 dark:border-gray-800 flex items-center justify-center gap-3 text-gray-400",children:[e.jsx("i",{className:"ri-shield-check-line text-blue-600"}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Official Campus Verification Protected"})]})]})]})})]})]})}export{U as default};
//# sourceMappingURL=ProductDetail-B91wA5x5.js.map
