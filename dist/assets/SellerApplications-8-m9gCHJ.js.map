{"version":3,"mappings":"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","names":["SellerApplications","navigate","useNavigate","profile","useAuth","applications","setApplications","useState","loading","setLoading","filter","setFilter","selectedApp","setSelectedApp","showModal","setShowModal","rejectionReason","setRejectionReason","processing","setProcessing","useEffect","fetchApplications","channel","supabase","data","error","handleApprove","application","reviewedBy","appError","profileError","sellerError","sendSMS","__vitePreload","firstName","smsErr","handleReject","submitRejection","filteredApplications","app","stats","a","jsxs","jsx","Navbar","status","e"],"ignoreList":[],"sources":["../../src/pages/admin/SellerApplications.tsx"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport Navbar from '../../components/feature/Navbar';\r\n\r\ntype Application = {\r\n  id: string;\r\n  user_id: string;\r\n  business_name: string;\r\n  business_category: string;\r\n  business_description: string;\r\n  contact_phone: string;\r\n  contact_email: string;\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  rejection_reason?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  profiles?: {\r\n    full_name: string;\r\n    email: string;\r\n    student_id: string;\r\n  };\r\n};\r\n\r\nexport default function SellerApplications() {\r\n  const navigate = useNavigate();\r\n  const { profile } = useAuth();\r\n  const [applications, setApplications] = useState<Application[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState<'all' | 'pending' | 'approved' | 'rejected'>('all');\r\n  const [selectedApp, setSelectedApp] = useState<Application | null>(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [rejectionReason, setRejectionReason] = useState('');\r\n  const [processing, setProcessing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (profile?.role !== 'admin' && profile?.role !== 'super_admin') {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    fetchApplications();\r\n\r\n    // Real-time subscription\r\n    const channel = supabase\r\n      .channel('seller_applications_changes')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'seller_applications',\r\n        },\r\n        () => {\r\n          fetchApplications();\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [profile, navigate]);\r\n\r\n  const fetchApplications = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('seller_applications')\r\n        .select(`\r\n          *,\r\n          profiles:user_id (\r\n            full_name,\r\n            email,\r\n            student_id\r\n          )\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setApplications(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching applications:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (application: Application) => {\r\n    if (!confirm(`Approve ${application.business_name}?`)) return;\r\n\r\n    setProcessing(true);\r\n    try {\r\n      // Check if admin ID is a valid UUID (system admin has text ID)\r\n      // If we are the system admin (or any non-UUID), we pass null to reviewed_by\r\n      // because the column is UUID type.\r\n      const isValidUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(profile?.id || '');\r\n      const reviewedBy = isValidUUID ? profile?.id : null;\r\n\r\n      // Update application status\r\n      const { error: appError } = await supabase\r\n        .from('seller_applications')\r\n        .update({\r\n          status: 'approved',\r\n          reviewed_at: new Date().toISOString(),\r\n          reviewed_by: reviewedBy,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id', application.id);\r\n\r\n      if (appError) throw appError;\r\n\r\n      // Update user role to seller\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .update({ role: 'seller' })\r\n        .eq('id', application.user_id);\r\n\r\n      if (profileError) throw profileError;\r\n\r\n      // Create seller profile\r\n      const { error: sellerError } = await supabase\r\n        .from('seller_profiles')\r\n        .insert({\r\n          user_id: application.user_id,\r\n          business_name: application.business_name,\r\n          business_category: application.business_category,\r\n          business_description: application.business_description,\r\n          contact_phone: application.contact_phone,\r\n          contact_email: application.contact_email,\r\n          subscription_status: 'inactive',\r\n          is_active: true\r\n        });\r\n\r\n      if (sellerError && sellerError.code !== '23505') throw sellerError;\r\n\r\n      // Send SMS Notification\r\n      if (application.contact_phone) {\r\n        try {\r\n          const { sendSMS } = await import('../../lib/arkesel');\r\n          const firstName = application.profiles?.full_name.split(' ')[0] || 'User';\r\n\r\n          await sendSMS(\r\n            [application.contact_phone],\r\n            `Hi ${firstName}, congratulations! Your seller application for \"${application.business_name}\" on PU Connect has been APPROVED. You can now log in and start listing your products. Happy selling!`\r\n          );\r\n        } catch (smsErr) {\r\n          console.error('Failed to send approval SMS:', smsErr);\r\n          // Don't block the approval if SMS fails, just log it\r\n        }\r\n      }\r\n\r\n      alert('Application approved successfully! SMS notification sent.');\r\n      fetchApplications();\r\n    } catch (error: any) {\r\n      console.error('Error approving application:', error);\r\n      alert('Failed to approve application: ' + error.message);\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleReject = (application: Application) => {\r\n    setSelectedApp(application);\r\n    setRejectionReason('');\r\n    setShowModal(true);\r\n  };\r\n\r\n  const submitRejection = async () => {\r\n    if (!selectedApp || !rejectionReason.trim()) {\r\n      alert('Please provide a rejection reason');\r\n      return;\r\n    }\r\n\r\n    setProcessing(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('seller_applications')\r\n        .update({\r\n          status: 'rejected',\r\n          rejection_reason: rejectionReason,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id', selectedApp.id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('Application rejected');\r\n      setShowModal(false);\r\n      setSelectedApp(null);\r\n      fetchApplications();\r\n    } catch (error: any) {\r\n      console.error('Error rejecting application:', error);\r\n      alert('Failed to reject application: ' + error.message);\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const filteredApplications = applications.filter(app =>\r\n    filter === 'all' ? true : app.status === filter\r\n  );\r\n\r\n  const stats = {\r\n    total: applications.length,\r\n    pending: applications.filter(a => a.status === 'pending').length,\r\n    approved: applications.filter(a => a.status === 'approved').length,\r\n    rejected: applications.filter(a => a.status === 'rejected').length,\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 transition-colors duration-300\">\r\n        <Navbar />\r\n        <div className=\"flex items-center justify-center py-20\">\r\n          <div className=\"text-center\">\r\n            <div className=\"w-16 h-16 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading applications...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 transition-colors duration-300\">\r\n      <Navbar />\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-12\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg\">\r\n              <i className=\"ri-file-list-3-line text-2xl text-white\"></i>\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Seller Applications</h1>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">Review and manage seller applications</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm transition-colors\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Total Applications</p>\r\n                <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{stats.total}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                <i className=\"ri-file-list-line text-2xl text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm transition-colors\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Pending Review</p>\r\n                <p className=\"text-3xl font-bold text-yellow-600 dark:text-yellow-400\">{stats.pending}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                <i className=\"ri-time-line text-2xl text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm transition-colors\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Approved</p>\r\n                <p className=\"text-3xl font-bold text-green-600 dark:text-green-400\">{stats.approved}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                <i className=\"ri-checkbox-circle-line text-2xl text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm transition-colors\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Rejected</p>\r\n                <p className=\"text-3xl font-bold text-red-600 dark:text-red-400\">{stats.rejected}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                <i className=\"ri-close-circle-line text-2xl text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filter Tabs */}\r\n        <div className=\"bg-white dark:bg-gray-900 rounded-xl p-2 mb-6 border border-gray-100 dark:border-gray-800 shadow-sm inline-flex gap-2 w-full sm:w-auto overflow-x-auto transition-colors\">\r\n          {(['all', 'pending', 'approved', 'rejected'] as const).map((status) => (\r\n            <button\r\n              key={status}\r\n              onClick={() => setFilter(status)}\r\n              className={`px-6 py-2 rounded-lg font-medium text-sm transition-all whitespace-nowrap cursor-pointer ${filter === status\r\n                ? 'bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-md'\r\n                : 'text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800'\r\n                }`}\r\n            >\r\n              {status.charAt(0).toUpperCase() + status.slice(1)}\r\n              {status !== 'all' && (\r\n                <span className={`ml-2 px-2 py-0.5 rounded-full text-xs ${filter === status ? 'bg-white/20' : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400'}`}>\r\n                  {stats[status]}\r\n                </span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Applications List */}\r\n        <div className=\"space-y-4\">\r\n          {filteredApplications.length === 0 ? (\r\n            <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center border border-gray-100 dark:border-gray-800 transition-colors\">\r\n              <i className=\"ri-inbox-line text-6xl text-gray-300 dark:text-gray-700 mb-4\"></i>\r\n              <p className=\"text-gray-500 dark:text-gray-400\">No applications found</p>\r\n            </div>\r\n          ) : (\r\n            filteredApplications.map((app) => (\r\n              <div\r\n                key={app.id}\r\n                className=\"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-md transition-all\"\r\n              >\r\n                <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-start gap-4 mb-4\">\r\n                      <div className=\"w-14 h-14 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md\">\r\n                        <i className=\"ri-store-3-line text-2xl text-white\"></i>\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-3 mb-2\">\r\n                          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">{app.business_name}</h3>\r\n                          <span className={`px-3 py-1 rounded-full text-xs font-semibold ${app.status === 'approved' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300' :\r\n                            app.status === 'rejected' ? 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300' :\r\n                              'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300'\r\n                            }`}>\r\n                            {app.status.toUpperCase()}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\r\n                          <i className=\"ri-user-line mr-1\"></i>\r\n                          {app.profiles?.full_name}\r\n                        </p>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                          <i className=\"ri-price-tag-3-line mr-1\"></i>\r\n                          {app.business_category}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 transition-colors\">\r\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">{app.business_description}</p>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                        <i className=\"ri-phone-line text-teal-600 dark:text-teal-400\"></i>\r\n                        <span>{app.contact_phone}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                        <i className=\"ri-mail-line text-teal-600 dark:text-teal-400\"></i>\r\n                        <span>{app.contact_email}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-500\">\r\n                      <span>\r\n                        <i className=\"ri-calendar-line mr-1\"></i>\r\n                        Applied: {new Date(app.created_at).toLocaleDateString()}\r\n                      </span>\r\n                      {app.updated_at !== app.created_at && (\r\n                        <span>\r\n                          <i className=\"ri-refresh-line mr-1\"></i>\r\n                          Updated: {new Date(app.updated_at).toLocaleDateString()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {app.rejection_reason && (\r\n                      <div className=\"mt-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/30 rounded-lg p-4\">\r\n                        <p className=\"text-sm font-semibold text-red-900 dark:text-red-300 mb-1\">Rejection Reason:</p>\r\n                        <p className=\"text-sm text-red-800 dark:text-red-200/80\">{app.rejection_reason}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {app.status === 'pending' && (\r\n                    <div className=\"flex flex-col gap-3 lg:w-48\">\r\n                      <button\r\n                        onClick={() => handleApprove(app)}\r\n                        disabled={processing}\r\n                        className=\"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all font-medium text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2 shadow-sm\"\r\n                      >\r\n                        <i className=\"ri-checkbox-circle-line text-lg\"></i>\r\n                        Approve\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleReject(app)}\r\n                        disabled={processing}\r\n                        className=\"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all font-medium text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2 shadow-sm\"\r\n                      >\r\n                        <i className=\"ri-close-circle-line text-lg\"></i>\r\n                        Reject\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rejection Modal */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50 backdrop-blur-sm\">\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-2xl max-w-md w-full p-6 shadow-2xl border border-gray-100 dark:border-gray-800\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg\">\r\n                <i className=\"ri-close-circle-line text-2xl text-white\"></i>\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">Reject Application</h3>\r\n            </div>\r\n\r\n            <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n              Please provide a reason for rejecting <strong>{selectedApp?.business_name}</strong>\r\n            </p>\r\n\r\n            <textarea\r\n              value={rejectionReason}\r\n              onChange={(e) => setRejectionReason(e.target.value)}\r\n              placeholder=\"Enter rejection reason...\"\r\n              rows={4}\r\n              maxLength={500}\r\n              className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none mb-2 outline-none\"\r\n            />\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-500 mb-4\">{rejectionReason.length}/500 characters</p>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowModal(false);\r\n                  setSelectedApp(null);\r\n                }}\r\n                disabled={processing}\r\n                className=\"flex-1 px-6 py-3 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-all font-medium text-sm whitespace-nowrap disabled:opacity-50 cursor-pointer\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={submitRejection}\r\n                disabled={processing || !rejectionReason.trim()}\r\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all font-medium text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer shadow-md\"\r\n              >\r\n                {processing ? 'Rejecting...' : 'Confirm Rejection'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"file":"SellerApplications-8-m9gCHJ.js"}