import{j as e}from"./query-vendor-Cpskl8RO.js";import{u as j,s as m,N as w,g as k}from"./index-DVwrR-_V.js";import{u as N,d as y,e as _}from"./useProducts-YaSfrjFx.js";import{u as P,r as o,L as b}from"./react-vendor-Bsfkyusf.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function E(){const{user:c,profile:r}=j(),i=P(),[s,x]=o.useState(null);o.useEffect(()=>{const t=m.channel("online-users");return t.on("presence",{event:"join"},({key:l,newPresences:v})=>{const n=v[0];n&&n.user_id!==r?.id&&x({type:"info",message:`${n.full_name||"A user"} came online`})}).subscribe(),()=>{m.removeChannel(t)}},[r]),o.useEffect(()=>{if(s){const t=setTimeout(()=>x(null),4e3);return()=>clearTimeout(t)}},[s]);const{data:a=[],isLoading:u}=N({sellerId:c?.id}),g=y(),h=_(),d={total:a.length,active:a.filter(t=>t.is_active).length,views:a.reduce((t,l)=>t+(l.views_count||0),0)};if(!c||!["seller","admin","super_admin"].includes(r?.role||""))return i("/marketplace"),null;const p=(t,l)=>{g.mutate({id:t,updates:{is_active:!l}})},f=t=>{window.confirm("Delete this product? This action cannot be undone.")&&h.mutate(t)};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900 transition-colors duration-300 pb-20",children:[e.jsx(w,{}),s&&e.jsxs("div",{className:`fixed top-24 right-4 md:right-8 z-50 animate-in fade-in slide-in-from-right-8 duration-300 px-6 py-4 rounded-2xl shadow-2xl border flex items-center gap-3 backdrop-blur-md ${s.type==="success"?"bg-emerald-500/90 border-emerald-400/50 text-white":s.type==="error"?"bg-rose-500/90 border-rose-400/50 text-white":"bg-blue-500/90 border-blue-400/50 text-white"}`,children:[e.jsx("i",{className:`${s.type==="success"?"ri-checkbox-circle-fill":s.type==="error"?"ri-error-warning-fill":"ri-notification-3-fill"} text-xl`}),e.jsx("span",{className:"font-bold text-sm tracking-wide",children:s.message})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-12 pt-32 md:pt-40 box-border",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-10 mb-16 md:mb-24 text-center md:text-left",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-slate-900 dark:bg-blue-600 text-white text-[10px] font-bold uppercase tracking-widest rounded-full mb-6 shadow-lg shadow-blue-500/20",children:[e.jsx("i",{className:"ri-shield-star-line text-blue-400 dark:text-blue-200"}),"Official Seller Portal"]}),e.jsxs("h1",{className:"text-4xl md:text-[4rem] font-bold text-slate-900 dark:text-white leading-tight tracking-tight mb-4",children:["Merchant",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Operations."})]}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500 font-bold uppercase tracking-widest text-[10px] md:text-xs",children:"Management of campus marketplace activities"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(b,{to:"/seller/add-product",className:"group px-10 py-5 bg-blue-600 text-white font-bold text-xs uppercase tracking-widest rounded-2xl hover:bg-blue-700 transition-all flex items-center justify-center gap-4 active:scale-95 shadow-lg shadow-blue-500/20",children:[e.jsx("span",{children:"Add New Product"}),e.jsx("i",{className:"ri-add-line text-xl"})]}),(r?.role==="admin"||r?.role==="super_admin")&&e.jsxs("button",{onClick:()=>i("/admin/dashboard"),className:"group px-10 py-4 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 font-bold text-xs uppercase tracking-widest rounded-2xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("i",{className:"ri-arrow-left-line text-lg"}),e.jsx("span",{children:"Admin Dashboard"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-24",children:[{label:"Inventory Count",value:d.total,icon:"ri-shopping-bag-3-fill",color:"from-slate-700 to-slate-900"},{label:"Published Items",value:d.active,icon:"ri-check-double-line",color:"from-blue-500 to-blue-600"},{label:"Cumulative Views",value:d.views.toLocaleString(),icon:"ri-eye-line",color:"from-emerald-500 to-emerald-600"}].map((t,l)=>e.jsxs("div",{className:"relative bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 p-8 rounded-[2rem] shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-between overflow-hidden group",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${t.color} opacity-[0.05] rounded-bl-full group-hover:scale-110 transition-transform duration-500`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:t.label}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:t.value})]}),e.jsx("div",{className:`w-14 h-14 bg-gradient-to-tr ${t.color} rounded-2xl flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx("i",{className:`${t.icon} text-2xl`})})]},l))}),e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-8 border-b border-slate-50 dark:border-slate-800",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-4",children:["Merchant Products",e.jsxs("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-4 py-1.5 rounded-full uppercase tracking-widest",children:[a.length," Total"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"System Online"})]})]}),e.jsx("div",{children:u?e.jsxs("div",{className:"py-32 flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-slate-100 dark:border-slate-800 border-t-blue-600 rounded-full animate-spin mb-8"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Retrieving Inventory Data..."})]}):a.length===0?e.jsxs("div",{className:"py-24 text-center bg-slate-50 dark:bg-slate-800/50 rounded-[2.5rem] border border-slate-50 dark:border-slate-800",children:[e.jsx("div",{className:"w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-sm",children:e.jsx("i",{className:"ri-folder-add-line text-3xl text-slate-200 dark:text-slate-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 tracking-tight",children:"No Listings Found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mx-auto mb-8 font-semibold text-xs leading-relaxed",children:"Your inventory is currently empty. Add your first product to begin trading on the marketplace."}),e.jsx(b,{to:"/seller/add-product",className:"px-8 py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/10 active:scale-95 uppercase tracking-widest text-[10px]",children:"Create Your First Listing"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-10",children:a.map(t=>e.jsxs("div",{className:"group relative bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-[2rem] p-6 transition-all hover:shadow-xl hover:border-blue-100 dark:hover:border-blue-900 flex flex-col lg:flex-row items-center gap-10",children:[e.jsxs("div",{className:"w-full lg:w-48 h-48 rounded-2xl overflow-hidden bg-slate-50 dark:bg-slate-700 border border-slate-50 dark:border-slate-700 flex-shrink-0 relative",children:[t.images?.[0]?e.jsx("img",{src:k(t.images[0],400,85),alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-200 dark:text-slate-600",children:e.jsx("i",{className:"ri-image-2-line text-4xl"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:`px-2.5 py-1 text-[9px] font-bold uppercase tracking-widest rounded-lg shadow-md ${t.is_active?"bg-emerald-500 text-white":"bg-slate-900 text-white"}`,children:t.is_active?"Active":"Private"})})]}),e.jsxs("div",{className:"flex-1 w-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors tracking-tight mb-2",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[e.jsx("i",{className:"ri-eye-line text-blue-600 dark:text-blue-400"}),t.views_count||0," Views"]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-500 uppercase tracking-widest",children:t.category})]})]}),e.jsxs("div",{className:"md:text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:t.price_type==="fixed"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-bold mr-1",children:"GHâ‚µ"}),t.price?.toLocaleString()]}):"Negotiable"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:t.price_type==="fixed"?"Fixed Price":"Flexible Pricing"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>i(`/seller/edit-product/${t.id}`),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl hover:bg-slate-100 dark:hover:bg-slate-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 uppercase tracking-widest text-[10px]",children:[e.jsx("i",{className:"ri-edit-line text-base"}),"Edit Details"]}),e.jsxs("button",{onClick:()=>p(t.id,t.is_active),className:`flex-1 flex items-center justify-center gap-2 px-6 py-3.5 font-bold rounded-xl transition-all active:scale-95 uppercase tracking-widest text-[10px] ${t.is_active?"bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-400 dark:hover:bg-amber-900/30":"bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30"}`,children:[e.jsx("i",{className:t.is_active?"ri-eye-off-line text-base":"ri-eye-line text-base"}),t.is_active?"Hide Listing":"Publish Listing"]}),e.jsx("button",{onClick:()=>f(t.id),className:"sm:flex-none flex items-center justify-center w-12 h-12 bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 rounded-xl hover:bg-rose-600 hover:text-white transition-all border border-rose-100 dark:border-rose-900/30 active:scale-95",title:"Delete Listing",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]})]},t.id))})})]})]})]})}export{E as default};
//# sourceMappingURL=SellerDashboard-COzJunGp.js.map
